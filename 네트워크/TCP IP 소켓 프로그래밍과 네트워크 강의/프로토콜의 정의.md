# 프로토콜의 정의

- 프로토콜이란?
  - 컴퓨터(호스트) 상호간의 대화에 필요한 통신 규약.
    - 호스트 상호간에는 프로토콜에 대한 이해가 필요.
    - 서로 데이터를 주고 받기 위해 양방간에 미리 정해놓은 약속.
- 프로토콜은 잘 정의되어야 하며, 혼돈의 소지가 있으면 안된다.
  - 클라이언트가 서버에 요청을 했을 당시, 클라이언트와 서버 둘 다 동시에 read 함수를 써버리면 서버 다운됨. -> 프로토콜이 잘 정의되지 않은 상태.
  - 데이터를 수신 하는 함수: read, recieve
- 이미 정의 되어 있는 프로토콜도 존재하며, 앞으로 우리도 많은 프로토콜을 설계 할 것이다.



## 소켓의 생성

- 소켓은 기본적인 통신의 도구이다.

  - 멀리 떨어져 있는 두 호스트를 연결해주는 연결 매개체다.

- 소켓은 프로토콜에 독립적이다.

  - 밑에 socket 함수 첫번째 인자인 domain에 IPv4나 IPv6를(프로토콜 체계) 전해주는 것에 따라 다른 socket을 생성시킴.
  - 전달되는 인자에 따라 socket이 다르게 정해짐. -> 프로토콜에 독립적이다~.

- 데이터 전송 타입을 지정해 줘야 한다.

  - 연결 지향 소켓, 비 연결 지향 소켓.
  - 하나의 프로토콜 내에서도 데이터를 전달하는 방식이 나뉘어짐.
  - 때문에 데이터 전송 타입(int type)을 인자로 넣음.

- ```c
  #include <sys/types.h>
  #include <sys/socket.h>
  
  int socket(int domain, int type, int protocol) // 소켓 생성 함수
  ```
  - 첫 번째로 들어가는 `domain`: 프로토콜 체계
    - 우리가 흔히 말하는 프로토콜은 `프로토콜 체계`임.
    - 여러 개의 작은 프로토콜이 모여서 하나의 프로토콜 체계를 이루는 거임.
    - 다양한 프로토콜들이 있다.(아래 대표적 예시)
      - `PF_INET`: IPv4 인터넷 프로토콜, 아이피 버전 4를 기반으로 한 인터넷 프로토콜
      - `PF_INET6`: IPv6 인터넷 프로토콜, 아이피 버전 6를 기반으로 한 인터넷 프로토콜
      - 둘 다 인터넷 프로토콜임.
      - `IPv4`: 인터넷에서 호스트를 구분지을 때 사용하는 IP 주소를 4byte로  표현하는 것.
        - ex) 127.0.0.1 -> loop back address: 자기 자신을 의미하는 것.
        - 127이 1 byte, 0 도 1byte, 0도 1byte, 1도 1byte -> 4byte 주소로 호스트 구분.
        - 총 32bit 이므로 만들 수 있는 총 주소의 개수는 2^32 개임.
        - 그렇기 때문에 전세계 적으로 IP 주소 자원이 이미 고갈됨. -> 다른 방법 고안: IPv6 생각해냄.
      - `IPv6`: 16 byte로 주소를 표현함. 고로 2^128개의 주소를 할당 가능. -> 약 20억개의 IP 주소 부여 가능.



## 소켓의 (전송) 타입

1. 연결 지향형 소켓
2. 비 연결 지향형 소켓

